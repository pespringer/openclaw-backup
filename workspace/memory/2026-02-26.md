
## Mission Control – threaded comments shipped + migration recovery
- Threaded comments implementation was merged to main by Patrick (merge commit `c7cb7aa`, original commit `b983292`).
- Migration issue: `_prisma_migrations` had a failed row for `20260225193000_threaded_task_comments` because the DB column existed from manual ALTER; this blocked `mission-control-migrate` and prevented `mission-control-app` from starting.
- Fixed by running `prisma migrate resolve --applied 20260225193000_threaded_task_comments`, deleting the stale unfinished row from `_prisma_migrations`, then `docker compose up -d` and later `docker compose down && docker compose up -d --build` to redeploy cleanly.

## Mission Control – Search story progress
- Started story `2104e1bc-625a-4cd3-a7f0-af86c8b50221` (Search: full-text + autocomplete) on branch `feature/task-search-fts-autocomplete`.
- Implemented Postgres full-text search for `/api/tasks/search` using `prisma.$queryRaw` with `websearch_to_tsquery('english', q)` and ranking across Task.searchVector and TaskComment.searchVector.
- Added autocomplete endpoint `/api/tasks/suggest?q=` (title contains; scoped by same visibility rules).
- Added DB support via migration `20260226050000_task_search_fts`:
  - `searchVector` tsvector columns on `Task` and `TaskComment`
  - backfill + triggers to keep vectors updated
  - GIN indexes on vectors
  - `pg_trgm` extension + trigram GIN index on `Task.title`
- Commit: `2dd1ffb` and redeployed containers successfully.
- Remaining work: wire UI autocomplete dropdown on Projects search input; possibly improve suggestion ordering (trigram similarity) and confirm whether “history” means ActivityEvent search.
