# 2026-02-21
## Work Summary
- **Implemented Keyboard Shortcuts**: Added configurable keyboard shortcuts for the Projects board in Mission Control. This includes mapping shortcuts for toggling task filters, quick task creation, and a modal for displaying help documentation about these shortcuts.
- **Tasks Completed**:
  - Patched `app/projects/page.tsx` and `app/settings/page.tsx` to integrate shortcut settings and handlers.
  - Created `lib/shortcuts.ts` to centralize logic for managing and humanizing shortcuts.
  - Rebuilt and redeployed Docker containers after completing implementation and testing.
- **Committed Work**:
  - Commit message: "Add configurable keyboard shortcuts for Projects board"
  - All changes successfully built and validated.

## Outcome
- Delivered a working feature ready for review.
- System proactively prompted Patrick for feedback and validation.

## Notes
- **Focus Areas**:
  - Enhanced developer experience with modularized shortcuts logic.
  - Ensured UI communicates functionality clearly (e.g., shortcuts shown in the settings modal).
  - Preserved backward compatibility to prevent interrupting workflows.

- **Morning Brief reliability fixes (Brave rate limit + weather)**:
  - Root cause of "rate limit exceeded": the **Brave Search API** (used by the `web_search` tool) returned HTTP 429 `RATE_LIMITED` on the **Free** plan when multiple searches were triggered back-to-back (Brave meta showed `rate_limit=1`, `rate_current=1`). This is unrelated to the Brave browser UI.
  - Fix applied: updated the Morning Brief cron prompt to:
    - Fetch weather via `curl` against **wttr.in JSON** (primary) or **Open-Meteo** (fallback) instead of web_search/scraping pages.
    - Use **at most one** `web_search` call for AI news.
    - Avoid `web_search` entirely for the “1 thing to learn today” section (use evergreen docs links instead).

## Ops / Reliability Notes (added 2026-02-21)
- **Morning Brief Brave rate-limit root cause**: The `web_search` tool uses the **Brave Search API**; we saw HTTP 429 `RATE_LIMITED` with meta indicating **plan=Free** and **rate_limit=1** when multiple web_search calls were made back-to-back in a single brief (AI news + micro-exercise, etc.). This is unrelated to the Brave browser UI.
- **Morning Brief fix applied**: Updated cron job `Daily 8am Morning Brief (Grove City OH + AI news + goals)` prompt to:
  - Fetch weather via `exec` + `curl` to machine-readable sources (wttr.in JSON primary; Open-Meteo fallback) instead of web_search/scraping sites like AccuWeather.
  - Use **at most one** `web_search` call for AI news; avoid parallel searches.
  - Avoid `web_search` entirely for the learning bite (use evergreen docs links instead).
  - Pull project priorities via `docker exec mission-control-db psql ...`.
- **Validation**: Confirmed both weather endpoints return JSON from this host (wttr.in + Open-Meteo).
- **Gateway**: Restarted gateway after updating cron job so changes are live.

## Tooling gotcha (Codex)
- Observed several `codex exec --full-auto "..."` background runs failing with `unexpected argument 'Agent' found` / shell errors when the prompt text was not quoted/escaped correctly.
- Mitigation: ensure prompts are passed as a single properly-quoted argument (use heredoc or JSON-escaped string; avoid unescaped newlines/quotes in the shell).
